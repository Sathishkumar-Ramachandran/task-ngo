{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sathi/full_app/ngo-impact-tracker/frontend/components/JobProgress.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function JobProgress({ jobId }) {\r\n  const [progress, setProgress] = useState(0);\r\n  const [status, setStatus] = useState('active');\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const res = await axios.get(`http://localhost:3001/api/reports/job-status/${jobId}`);\r\n        setProgress(res.data.progress);\r\n        setStatus(res.data.state);\r\n        \r\n        if (res.data.state === 'completed' || res.data.state === 'failed') {\r\n          clearInterval(interval);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [jobId]);\r\n\r\n  return (\r\n    <div className=\"mt-4\">\r\n      <p>Status: {status}</p>\r\n      <div className=\"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700\">\r\n        <div className=\"bg-blue-600 h-2.5 rounded-full\" style={{ width: `${progress}%` }}></div>\r\n      </div>\r\n      <p>{progress}%</p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;;;;AAEe,SAAS,YAAY,EAAE,KAAK,EAAE;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IAErC,IAAA,gHAAS,EAAC;QACR,MAAM,WAAW,YAAY;YAC3B,IAAI;gBACF,MAAM,MAAM,MAAM,qHAAK,CAAC,GAAG,CAAC,CAAC,6CAA6C,EAAE,OAAO;gBACnF,YAAY,IAAI,IAAI,CAAC,QAAQ;gBAC7B,UAAU,IAAI,IAAI,CAAC,KAAK;gBAExB,IAAI,IAAI,IAAI,CAAC,KAAK,KAAK,eAAe,IAAI,IAAI,CAAC,KAAK,KAAK,UAAU;oBACjE,cAAc;gBAChB;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC;YAChB;QACF,GAAG;QAEH,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;KAAM;IAEV,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;;oBAAE;oBAAS;;;;;;;0BACZ,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC;oBAAI,WAAU;oBAAiC,OAAO;wBAAE,OAAO,GAAG,SAAS,CAAC,CAAC;oBAAC;;;;;;;;;;;0BAEjF,qKAAC;;oBAAG;oBAAS;;;;;;;;;;;;;AAGnB"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sathi/full_app/ngo-impact-tracker/frontend/pages/bulk-upload.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from 'axios';\r\nimport JobProgress from '../components/JobProgress';\r\nimport Link from 'next/link';\r\n\r\nexport default function BulkUpload() {\r\n  const [file, setFile] = useState(null);\r\n  const [jobId, setJobId] = useState(null);\r\n\r\n  const handleUpload = async () => {\r\n    if (!file) return;\r\n    \r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    try {\r\n      const res = await axios.post('http://localhost:3001/api/reports/upload', formData);\r\n      setJobId(res.data.jobId);\r\n    } catch (error) {\r\n      console.error('Upload failed', error);\r\n      alert('Upload failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4 max-w-2xl\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold\">Bulk Upload Reports</h1>\r\n        <Link href=\"/\" className=\"text-blue-600 hover:underline\">Back to Home</Link>\r\n      </div>\r\n      \r\n      <div className=\"bg-white p-6 rounded shadow-md\">\r\n        <p className=\"mb-4 text-gray-600\">Upload a CSV file with columns: <code>ngo_id, month, people_helped, events_conducted, funds_utilized</code></p>\r\n        \r\n        <input \r\n          type=\"file\" \r\n          accept=\".csv\"\r\n          onChange={e => setFile(e.target.files[0])} \r\n          className=\"block w-full text-sm text-gray-500\r\n            file:mr-4 file:py-2 file:px-4\r\n            file:rounded-full file:border-0\r\n            file:text-sm file:font-semibold\r\n            file:bg-blue-50 file:text-blue-700\r\n            hover:file:bg-blue-100\"\r\n        />\r\n        \r\n        <button \r\n          className={`bg-blue-600 text-white px-6 py-2 rounded mt-4 font-semibold ${!file ? 'opacity-50 cursor-not-allowed' : 'hover:bg-blue-700'}`}\r\n          onClick={handleUpload}\r\n          disabled={!file}\r\n        >\r\n          Upload CSV\r\n        </button>\r\n\r\n        {jobId && (\r\n          <div className=\"mt-6 border-t pt-4\">\r\n            <h3 className=\"font-semibold mb-2\">Processing Status</h3>\r\n            <JobProgress jobId={jobId} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;;AAEe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IAEnC,MAAM,eAAe;QACnB,IAAI,CAAC,MAAM;QAEX,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QAExB,IAAI;YACF,MAAM,MAAM,MAAM,qHAAK,CAAC,IAAI,CAAC,4CAA4C;YACzE,SAAS,IAAI,IAAI,CAAC,KAAK;QACzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM;QACR;IACF;IAEA,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,qKAAC,gIAAI;wBAAC,MAAK;wBAAI,WAAU;kCAAgC;;;;;;;;;;;;0BAG3D,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAE,WAAU;;4BAAqB;0CAAgC,qKAAC;0CAAK;;;;;;;;;;;;kCAExE,qKAAC;wBACC,MAAK;wBACL,QAAO;wBACP,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;wBACxC,WAAU;;;;;;kCAQZ,qKAAC;wBACC,WAAW,CAAC,4DAA4D,EAAE,CAAC,OAAO,kCAAkC,qBAAqB;wBACzI,SAAS;wBACT,UAAU,CAAC;kCACZ;;;;;;oBAIA,uBACC,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAG,WAAU;0CAAqB;;;;;;0CACnC,qKAAC,6HAAW;gCAAC,OAAO;;;;;;;;;;;;;;;;;;;;;;;;AAMhC"}}]
}